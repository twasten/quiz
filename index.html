<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест: Политические координаты</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            height: 5px;
            background: #e0e0e0;
            border-radius: 5px;
            margin-bottom: 20px;
            position: relative;
        }

            .progress-bar span {
                display: block;
                height: 100%;
                background: #4caf50;
                width: 0%; /* Progress */
                border-radius: 5px;
            }

        .question {
            font-size: 18px;
            margin-bottom: 20px;
        }

        .slider-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

            .slider-container span {
                font-size: 14px;
            }

        .slider {
            width: 100%;
            margin: 0 10px;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: linear-gradient(to right, red, green);
            border-radius: 5px;
            outline: none;
            opacity: 0.9;
            transition: opacity 0.2s;
        }

            .slider:hover {
                opacity: 1;
            }

        .button-container {
            text-align: center;
        }

            .button-container button {
                background: #4caf50;
                color: #fff;
                border: none;
                padding: 10px 20px;
                font-size: 16px;
                border-radius: 5px;
                cursor: pointer;
            }

                .button-container button:hover {
                    background: #45a049;
                }

        #graph {
            width: 100%;
            height: 100vh;
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-bar">
            <span id="progress"></span>
        </div>
        <div class="question" id="question">
            Вопрос 1 из 11<br>
            Рынок регулирует сам себя лучше, чем государство.
        </div>
        <div class="slider-container">
            <span>Не согласен</span>
            <input type="range" min="0" max="100" value="50" class="slider" id="slider">
            <span>Согласен</span>
        </div>
        <div class="button-container">
            <button onclick="nextQuestion()">Продолжить</button>
        </div>
    </div>

    <div id="graph"></div>

    <script>
        const questions = [
            { text: "Рынок регулирует сам себя лучше, чем государство.", axis: "z", values: [-2, -1, 2] },
            { text: "Государство обязано финансировать культурные, спортивные и другие сферы жизни общества.", axis: "z", values: [-2, 1, 2] },
            { text: "Сильная армия лучший способ обеспечения безопасности суверенитета и независимости.", axis: "z", values: [-2, 1, 2] },
            { text: "Президентская республика или абсолютная монархия лучше, чем парламентская республика или конституционная монархия.", axis: "z", values: [-2, 1, 2] },
            { text: "Государство должно распределять богатство между бедными и богатыми.", axis: "x", values: [2, -1, -2] },
            { text: "Если у меня что-то не получилось в жизни, в этом виноват только я.", axis: "x", values: [-2, 1, 2] },
            { text: "Государство обязано обеспечивать бесплатную медицинскую помощь, бесплатное образование и др.", axis: "x", values: [2, -1, -2] },
            { text: "Мне в целом все равно какой сексуальной ориентации человек, какой одежду он носит или какие у него политические взгляды.", axis: "x", values: [-2, 1, 2] },
            { text: "Аристократические и монархические титулы необходимо отменить вовсе.", axis: "y", values: [2, -1, -2] },
            { text: "Патриотизм и гражданственность является залогом к светлому будущему государства.", axis: "y", values: [-2, 1, 2] },
            { text: "Миграционные потоки необходимо свести к минимуму.", axis: "y", values: [-2, 1, 2] }
        ];

        let currentQuestion = 0;
        const progressBar = document.getElementById("progress");
        const questionElement = document.getElementById("question");
        const slider = document.getElementById("slider");

        let coordinates = { x: 0, y: 0, z: 0 };

        function nextQuestion() {
            const sliderValue = slider.value;
            const impact = sliderValue < 33 ? 0 : sliderValue < 66 ? 1 : 2;

            const axis = questions[currentQuestion].axis;
            coordinates[axis] += questions[currentQuestion].values[impact];

            currentQuestion++;
            if (currentQuestion < questions.length) {
                questionElement.innerHTML = `Вопрос ${currentQuestion + 1} из ${questions.length}<br>${questions[currentQuestion].text}`;
                slider.value = 50;
                progressBar.style.width = `${((currentQuestion) / questions.length) * 100}%`;
            } else {
                alert("Тест завершен! Построение графика...");
                renderGraph();
            }
        }

        function renderGraph() {
            const data = [{
                mode: "markers",
                marker: { size: 10, color: "red" },
                type: "scatter3d",
                x: [coordinates.x],
                y: [coordinates.y],
                z: [coordinates.z],
            }];

            const layout = {
                scene: {
                    xaxis: {
                        range: [-8, 8],
                        title: 'Индивидуализм-Коллективизм',
                        showgrid: true,
                        zeroline: true,
                        linecolor: 'blue', // Color of the X axis
                        linewidth: 4,
                        mirror: true,
                        titlefont: { color: 'blue' }
                    },
                    yaxis: {
                        range: [-8, 8],
                        title: 'Интернационализм-Национализм',
                        showgrid: true,
                        zeroline: true,
                        linecolor: 'green', // Color of the Y axis
                        linewidth: 4,
                        mirror: true,
                        titlefont: { color: 'green' }
                    },
                    zaxis: {
                        range: [-8, 8],
                        title: 'Либертарианство-Авторитаризм',
                        showgrid: true,
                        zeroline: true,
                        linecolor: 'red', // Color of the Z axis
                        linewidth: 4,
                        mirror: true,
                        titlefont: { color: 'red' }
                    },
                    aspectratio: { x: 1, y: 1, z: 1 },
                    camera: {
                        eye: { x: 1.5, y: 1.5, z: 1.5 }
                    }
                },
                margin: {
                    l: 0,
                    r: 0,
                    b: 0,
                    t: 0
                },
                annotations: [
                    {
                        x: 8,
                        y: 0,
                        z: 0,
                        text: "X",
                        showarrow: true,
                        arrowhead: 2,
                        ax: -20,
                        ay: 0,
                        font: {
                            size: 16,
                            color: 'blue'
                        }
                    },
                    {
                        x: 0,
                        y: 8,
                        z: 0,
                        text: "Y",
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -20,
                        font: {
                            size: 16,
                            color: 'green'
                        }
                    },
                    {
                        x: 0,
                        y: 0,
                        z: 8,
                        text: "Z",
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: 0,
                        font: {
                            size: 16,
                            color: 'red'
                        }
                    }
                ]
            };

            Plotly.newPlot('graph', data, layout);
        }
        
    </script>
</body>
</html>